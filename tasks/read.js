/** * http://top.baidu.com/buzz?b=26&c=1&fr=topcategory_c1 * 我们需要读取url中的响应体，并且读取中响应列表，并且传递给callback */var request=require('request');var iconv=require('iconv-lite');var cheerio=require('cheerio');var debug=require('debug');//用来写日志var logger=debug('crawl:read');//传入名字module.exports=function (url,callback) {    request({url,encoding:null},function (err,response,body) {       //因为响应体是bgk编码的，所以需要转成utf8        body=iconv.decode(body,'gbk');        var movies=[];        //把响应的字符串转成类似jq的字符串        var $=cheerio.load(body);        //通过筛选符号找出我想要的电影标题        $('.keyword .list-title').each(function () {            var $this=$(this);            var movie={                name:$this.text(),//电影名称                url:$this.attr('href')//电影url地址            }            logger(`读到电影：${movie.name}`);//读取一条打印一条            movies.push(movie);        })        callback(err,movies);    })}/*var url='http://top.baidu.com/buzz?b=26&c=1&fr=topcategory_c1';module.exports(url,function (err,result) {    console.log(result);});*/